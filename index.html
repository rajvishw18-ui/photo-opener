<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Mentor AI | Smart Study Planner</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Inter', sans-serif; }
    .glass { backdrop-filter: blur(10px); }
    .scrollbar-thin::-webkit-scrollbar { width: 8px; }
    .scrollbar-thin::-webkit-scrollbar-thumb { background: #6366f1; border-radius: 999px; }
  </style>
</head>
<body class="bg-slate-950 text-slate-100 min-h-screen">
  <div class="max-w-7xl mx-auto px-4 py-6 md:py-10">
    <header class="rounded-2xl p-6 md:p-10 bg-gradient-to-br from-blue-600 via-indigo-600 to-slate-900 shadow-2xl">
      <p class="uppercase tracking-[0.28em] text-xs text-blue-100">Class 6‚Äì12 Study Companion</p>
      <h1 class="mt-3 text-3xl md:text-5xl font-extrabold">Study Mentor AI</h1>
      <p class="mt-4 text-blue-100 max-w-3xl">A personal AI study mentor that understands your routine, weak chapters, and exam timeline to help you study smarter with confidence.</p>
      <div class="mt-6 flex flex-wrap gap-3 text-xs">
        <span class="bg-white/15 border border-white/20 px-3 py-1 rounded-full">Long-Term Smart Planner</span>
        <span class="bg-white/15 border border-white/20 px-3 py-1 rounded-full">Rapid Exam Preparation</span>
        <span class="bg-white/15 border border-white/20 px-3 py-1 rounded-full">Gamified Daily Tracker</span>
      </div>
    </header>

    <main class="mt-8 grid grid-cols-1 lg:grid-cols-12 gap-6">
      <section class="lg:col-span-7 bg-slate-900/80 border border-slate-800 rounded-2xl p-5 md:p-6">
        <div class="flex justify-between items-center gap-3 flex-wrap">
          <div>
            <h2 class="text-xl md:text-2xl font-bold">First-Time Setup</h2>
            <p class="text-slate-400 text-sm mt-1">Step-by-step onboarding. One section at a time.</p>
          </div>
          <span id="stepBadge" class="text-xs bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 px-3 py-1 rounded-full">Step 1 of 4</span>
        </div>

        <div class="mt-5 w-full bg-slate-800 rounded-full h-2">
          <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full" style="width: 25%"></div>
        </div>

        <form id="onboardingForm" class="mt-6 space-y-6">
          <div class="step" data-step="1">
            <h3 class="font-semibold text-lg">1Ô∏è‚É£ Basic Details</h3>
            <div class="grid md:grid-cols-2 gap-4 mt-3">
              <label class="text-sm">Full Name
                <input required name="fullName" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5" />
              </label>
              <label class="text-sm">Email ID
                <input required type="email" name="email" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5" />
              </label>
              <label class="text-sm">School Name
                <input required name="school" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5" />
              </label>
              <label class="text-sm">Board
                <select required name="board" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5">
                  <option value="">Choose board</option>
                  <option>CBSE</option><option>ICSE</option><option>State Board</option><option>Other</option>
                </select>
              </label>
              <label class="text-sm">Class
                <select required name="class" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5">
                  <option value="">Select class</option>
                  <option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option>
                </select>
              </label>
            </div>
          </div>

          <div class="step hidden" data-step="2">
            <h3 class="font-semibold text-lg">2Ô∏è‚É£ Subject Details</h3>
            <label class="text-sm block mt-3">What subjects do you study? (comma-separated)
              <input required id="subjectsInput" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5" placeholder="Maths, Science, English" />
            </label>
            <button type="button" id="generateSubjectCards" class="mt-3 bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-lg text-sm">Set Chapters & Understanding</button>
            <div id="subjectCards" class="mt-4 space-y-4"></div>
          </div>

          <div class="step hidden" data-step="3">
            <h3 class="font-semibold text-lg">3Ô∏è‚É£ Daily Routine Mapping</h3>
            <div class="grid md:grid-cols-2 gap-4 mt-3">
              <label class="text-sm">School Start
                <input required type="time" name="schoolStart" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5" />
              </label>
              <label class="text-sm">School End
                <input required type="time" name="schoolEnd" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5" />
              </label>
              <label class="text-sm">Coaching Start (optional)
                <input type="time" name="coachStart" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5" />
              </label>
              <label class="text-sm">Coaching End (optional)
                <input type="time" name="coachEnd" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5" />
              </label>
              <label class="text-sm">Travel time (mins)
                <input type="number" min="0" name="travel" value="30" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5" />
              </label>
              <label class="text-sm">Sleep (hours/day)
                <input required type="number" min="6" max="12" value="8" name="sleep" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5" />
              </label>
            </div>
            <div id="freeHoursBox" class="mt-4 hidden rounded-xl bg-emerald-500/10 border border-emerald-400/30 p-3 text-sm"></div>
          </div>

          <div class="step hidden" data-step="4">
            <h3 class="font-semibold text-lg">4Ô∏è‚É£ Study Goal Setting</h3>
            <div class="grid gap-4 mt-3">
              <label class="text-sm">Main Goal
                <select required name="goal" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5">
                  <option value="">Choose your goal</option>
                  <option>Score better in exams</option>
                  <option>Complete syllabus on time</option>
                  <option>Improve weak subjects</option>
                  <option>Exam in coming days</option>
                </select>
              </label>
              <label class="text-sm">How many hours/day do you WANT to study?
                <select required name="desiredHours" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5">
                  <option value="2">2 hours</option><option value="3">3 hours</option><option value="4">4 hours</option><option value="5">5 hours</option>
                </select>
              </label>
            </div>
          </div>

          <div class="flex justify-between pt-2">
            <button type="button" id="prevBtn" class="px-4 py-2 rounded-lg border border-slate-600 text-slate-300 hidden">Previous</button>
            <button type="button" id="nextBtn" class="ml-auto px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500">Next</button>
          </div>
        </form>
      </section>

      <aside class="lg:col-span-5 space-y-6">
        <section class="bg-slate-900/80 border border-slate-800 rounded-2xl p-5">
          <div class="flex justify-between items-center">
            <h3 class="font-bold text-lg">Mode Switch</h3>
            <div class="text-xs rounded-full px-3 py-1 bg-slate-800">AI Planner</div>
          </div>
          <div class="mt-4 grid grid-cols-2 gap-2 bg-slate-800 p-1 rounded-xl">
            <button id="longModeBtn" class="mode-btn bg-indigo-600 px-3 py-2 rounded-lg text-sm">Long-Term Planner</button>
            <button id="rapidModeBtn" class="mode-btn px-3 py-2 rounded-lg text-sm text-slate-300">Rapid Exam Prep</button>
          </div>

          <div id="rapidPanel" class="hidden mt-4 space-y-3 text-sm">
            <label>Exam name<input id="examName" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2" /></label>
            <label>Exam start date<input id="examDate" type="date" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2" /></label>
            <label>Subjects included (comma-separated)<input id="examSubjects" class="mt-1 w-full bg-slate-800 border border-slate-700 rounded-lg p-2" placeholder="Maths, Science" /></label>
            <label>Upload Admit Card / Date Sheet (image/pdf)
              <input id="examFile" type="file" accept="image/*,.pdf" class="mt-1 w-full text-xs" />
            </label>
            <button id="generateRapidPlan" class="w-full bg-orange-600 hover:bg-orange-500 py-2 rounded-lg">Create Crash Plan</button>
            <p class="text-xs text-slate-400">The app simulates datesheet extraction and prioritizes weak + high-weight chapters.</p>
          </div>
        </section>

        <section class="bg-slate-900/80 border border-slate-800 rounded-2xl p-5">
          <h3 class="font-bold text-lg">Daily Tracker & Gamification</h3>
          <div class="mt-4 space-y-3" id="taskList"></div>
          <div class="mt-4 grid grid-cols-3 gap-2 text-center text-xs">
            <div class="bg-slate-800 p-2 rounded-lg"><p class="text-slate-400">Points</p><p id="points" class="text-lg font-bold text-emerald-300">0</p></div>
            <div class="bg-slate-800 p-2 rounded-lg"><p class="text-slate-400">Streak</p><p id="streak" class="text-lg font-bold text-blue-300">0</p></div>
            <div class="bg-slate-800 p-2 rounded-lg"><p class="text-slate-400">Level</p><p id="level" class="text-sm font-bold text-indigo-300">Beginner</p></div>
          </div>
        </section>
      </aside>
    </main>

    <section class="mt-6 bg-slate-900/80 border border-slate-800 rounded-2xl p-5 md:p-6">
      <h2 class="text-xl font-bold">AI Study Output</h2>
      <div class="mt-4 grid xl:grid-cols-2 gap-4">
        <div class="bg-slate-800/70 rounded-xl p-4">
          <h4 class="font-semibold">üìÖ Daily Timetable</h4>
          <ul id="dailyPlan" class="mt-3 space-y-2 text-sm text-slate-200"></ul>
        </div>
        <div class="bg-slate-800/70 rounded-xl p-4">
          <h4 class="font-semibold">üóìÔ∏è Weekly Targets</h4>
          <ul id="weeklyTargets" class="mt-3 space-y-2 text-sm text-slate-200"></ul>
        </div>
      </div>

      <div class="mt-4 grid xl:grid-cols-3 gap-4 text-sm">
        <div class="bg-slate-800/70 rounded-xl p-4"><h4 class="font-semibold">üìà Analytics</h4><p id="analytics" class="mt-2 text-slate-300">Complete onboarding to see analytics.</p></div>
        <div class="bg-slate-800/70 rounded-xl p-4"><h4 class="font-semibold">üéØ Today's Priority Task</h4><p id="priorityTask" class="mt-2 text-slate-300">Not generated yet.</p></div>
        <div class="bg-slate-800/70 rounded-xl p-4"><h4 class="font-semibold">üí¨ Mentor Message</h4><p id="mentorMessage" class="mt-2 text-blue-200">You are doing great. Let's create your personalized plan.</p></div>
      </div>
    </section>
  </div>

  <script>
    let step = 1;
    const totalSteps = 4;
    let freeHours = 0;
    let studyData = { subjects: [] };
    let points = 0;
    let streak = 0;

    const levels = [
      { name: 'Beginner', min: 0 },
      { name: 'Focused', min: 40 },
      { name: 'Consistent', min: 90 },
      { name: 'Topper Mode üî•', min: 160 }
    ];

    const baseTasks = ['Complete study block', 'Finish revision set', 'Solve 10 practice questions'];
    const taskListEl = document.getElementById('taskList');

    function renderTasks() {
      taskListEl.innerHTML = '';
      baseTasks.forEach((task, idx) => {
        const card = document.createElement('div');
        card.className = 'bg-slate-800 border border-slate-700 rounded-lg p-3';
        card.innerHTML = `
          <p class="font-medium text-sm">${task}</p>
          <div class="mt-2 flex gap-2 text-xs">
            <button class="px-2 py-1 rounded bg-emerald-600" onclick="updateTask(${idx}, 'done')">‚úÖ Completed</button>
            <button class="px-2 py-1 rounded bg-amber-600" onclick="updateTask(${idx}, 'partial')">‚è≥ Partially Done</button>
            <button class="px-2 py-1 rounded bg-rose-700" onclick="updateTask(${idx}, 'skip')">‚ùå Skipped</button>
          </div>`;
        taskListEl.appendChild(card);
      });
    }

    function updateTask(idx, status) {
      if (status === 'done') { points += 10; streak += 1; }
      if (status === 'partial') { points += 5; }
      if (status === 'skip') { streak = 0; }

      document.getElementById('points').textContent = points;
      document.getElementById('streak').textContent = streak;
      document.getElementById('level').textContent = levels.filter(l => points >= l.min).at(-1).name;
      document.getElementById('mentorMessage').textContent = status === 'skip'
        ? 'Missed one task? No problem. We reshuffle and continue without pressure.'
        : 'Nice progress! Small steps daily build strong results.';
    }

    function stepUI() {
      document.querySelectorAll('.step').forEach(el => el.classList.add('hidden'));
      document.querySelector(`.step[data-step="${step}"]`).classList.remove('hidden');
      document.getElementById('prevBtn').classList.toggle('hidden', step === 1);
      document.getElementById('nextBtn').textContent = step === totalSteps ? 'Generate AI Plan' : 'Next';
      document.getElementById('stepBadge').textContent = `Step ${step} of ${totalSteps}`;
      document.getElementById('progressBar').style.width = `${(step / totalSteps) * 100}%`;
    }

    function toHours(start, end) {
      if (!start || !end) return 0;
      const [sh, sm] = start.split(':').map(Number);
      const [eh, em] = end.split(':').map(Number);
      return Math.max(0, (eh * 60 + em - (sh * 60 + sm)) / 60);
    }

    function computeFreeHours(fd) {
      const school = toHours(fd.get('schoolStart'), fd.get('schoolEnd'));
      const coaching = toHours(fd.get('coachStart'), fd.get('coachEnd'));
      const travel = Number(fd.get('travel') || 0) / 60;
      const sleep = Number(fd.get('sleep') || 8);
      freeHours = Math.max(0.5, 24 - school - coaching - travel - sleep - 1.5);
      const box = document.getElementById('freeHoursBox');
      box.classList.remove('hidden');
      box.textContent = `Estimated realistic self-study time: ${freeHours.toFixed(1)} hours/day.`;
    }

    function subjectStrengthValue(level) {
      const map = { '‚≠ê Beginner': 1, '‚≠ê‚≠ê Average': 2, '‚≠ê‚≠ê‚≠ê Good': 3, '‚≠ê‚≠ê‚≠ê‚≠ê Strong': 4 };
      return map[level] || 2;
    }

    function generatePlans(formData) {
      const desired = Number(formData.get('desiredHours'));
      const actual = Math.min(desired, freeHours || desired);
      const weakFirst = [...studyData.subjects].sort((a, b) => a.score - b.score);
      const top = weakFirst[0]?.name || 'Maths';
      const second = weakFirst[1]?.name || 'Science';

      const daily = [
        `üïì ${actual.toFixed(1)}h focused study (split in 45-min blocks + short breaks).`,
        `üìò ${Math.max(1, actual * 0.45).toFixed(1)}h on weak subject: ${top}.`,
        `üß™ ${Math.max(0.8, actual * 0.25).toFixed(1)}h practice problems (${second}).`,
        `üîÅ ${Math.max(0.7, actual * 0.2).toFixed(1)}h revision + formulas/definitions.`,
        `üß† 15-min recap journal and tomorrow prep.`
      ];

      const weekly = [
        `Mon/Tue: Finish 2 chapters from ${top} + quick revision.`,
        `Wed/Thu: Rotate to ${second} and one strong subject to avoid boredom.`,
        `Fri: Mixed practice + previous-year style questions.`,
        `Sat: Weekly revision map + doubt clearing.`,
        `Sun: Mock test + smart reshuffle for skipped tasks.`
      ];

      document.getElementById('dailyPlan').innerHTML = daily.map(i => `<li>‚Ä¢ ${i}</li>`).join('');
      document.getElementById('weeklyTargets').innerHTML = weekly.map(i => `<li>‚Ä¢ ${i}</li>`).join('');
      document.getElementById('priorityTask').textContent = `${top}: complete highest-weight weak chapter first.`;
      document.getElementById('analytics').textContent = `Daily study target: ${actual.toFixed(1)}h | Weak vs Strong trend: ${top} needs priority. Keep consistency streak for best improvement.`;
      document.getElementById('mentorMessage').textContent = 'You are not behind. Stick to this plan and improve one chapter at a time.';
    }

    document.getElementById('generateSubjectCards').addEventListener('click', () => {
      const subjects = document.getElementById('subjectsInput').value.split(',').map(s => s.trim()).filter(Boolean);
      const container = document.getElementById('subjectCards');
      container.innerHTML = '';
      subjects.forEach((subject, idx) => {
        const card = document.createElement('div');
        card.className = 'bg-slate-800 border border-slate-700 rounded-xl p-3';
        card.innerHTML = `
          <h4 class="font-semibold">${subject}</h4>
          <label class="text-xs block mt-2">Chapters (comma-separated)
            <input class="subject-chapters mt-1 w-full bg-slate-900 border border-slate-700 rounded p-2" data-name="${subject}" />
          </label>
          <label class="text-xs block mt-2">Understanding Level
            <select class="subject-score mt-1 w-full bg-slate-900 border border-slate-700 rounded p-2" data-name="${subject}">
              <option>‚≠ê Beginner</option><option>‚≠ê‚≠ê Average</option><option>‚≠ê‚≠ê‚≠ê Good</option><option>‚≠ê‚≠ê‚≠ê‚≠ê Strong</option>
            </select>
          </label>`;
        container.appendChild(card);
      });
    });

    document.getElementById('nextBtn').addEventListener('click', () => {
      const form = document.getElementById('onboardingForm');
      const fd = new FormData(form);

      if (step === 2) {
        const subjectNodes = [...document.querySelectorAll('.subject-score')];
        studyData.subjects = subjectNodes.map(node => {
          const subject = node.dataset.name;
          const chapterNode = document.querySelector(`.subject-chapters[data-name="${subject}"]`);
          return {
            name: subject,
            chapters: (chapterNode?.value || '').split(',').map(c => c.trim()).filter(Boolean),
            score: subjectStrengthValue(node.value)
          };
        });
      }

      if (step === 3) computeFreeHours(fd);

      if (step < totalSteps) {
        step += 1;
        stepUI();
      } else {
        generatePlans(fd);
      }
    });

    document.getElementById('prevBtn').addEventListener('click', () => {
      if (step > 1) { step -= 1; stepUI(); }
    });

    document.getElementById('longModeBtn').addEventListener('click', () => {
      document.getElementById('rapidPanel').classList.add('hidden');
      document.getElementById('longModeBtn').classList.add('bg-indigo-600');
      document.getElementById('rapidModeBtn').classList.remove('bg-indigo-600');
    });

    document.getElementById('rapidModeBtn').addEventListener('click', () => {
      document.getElementById('rapidPanel').classList.remove('hidden');
      document.getElementById('rapidModeBtn').classList.add('bg-indigo-600');
      document.getElementById('longModeBtn').classList.remove('bg-indigo-600');
    });

    document.getElementById('generateRapidPlan').addEventListener('click', () => {
      const exam = document.getElementById('examName').value || 'Upcoming Exam';
      const date = document.getElementById('examDate').value;
      const subjects = (document.getElementById('examSubjects').value || 'Maths, Science').split(',').map(v => v.trim()).filter(Boolean);
      const start = date ? new Date(date) : new Date(Date.now() + 7 * 86400000);
      const now = new Date();
      const days = Math.max(1, Math.ceil((start - now) / 86400000));

      const crash = [];
      for (let d = 1; d <= Math.min(days, 5); d++) {
        const sub = subjects[(d - 1) % subjects.length];
        crash.push(`Day ${d}: 3h ${sub} high-weight chapters ‚Ä¢ 1h revision ‚Ä¢ 30m formulas ‚Ä¢ 45m mock test`);
      }

      document.getElementById('dailyPlan').innerHTML = crash.map(i => `<li>‚Ä¢ ${i}</li>`).join('');
      document.getElementById('weeklyTargets').innerHTML = `<li>‚Ä¢ ${exam} starts in ${days} day(s). Prioritize weak chapters first.</li><li>‚Ä¢ Datesheet upload parsed (simulated): subject order aligned in crash plan.</li>`;
      document.getElementById('priorityTask').textContent = `Rapid mode: Today's highest priority is ${subjects[0]} + revision.`;
      document.getElementById('mentorMessage').textContent = 'Short timeline? Stay calm. We focus on important chapters, revision, and mocks.';
      document.getElementById('analytics').textContent = `Crash plan active: ${days} day(s) left. Balanced prep with no overload.`;
    });

    renderTasks();
    stepUI();
  </script>
</body>
</html>
